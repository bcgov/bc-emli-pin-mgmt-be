{
	"components": {
		"examples": {},
		"headers": {},
		"parameters": {},
		"requestBodies": {},
		"responses": {},
		"schemas": {
			"HelloWorldResponse": {
				"properties": {
					"message": {
						"type": "string"
					}
				},
				"required": [
					"message"
				],
				"type": "object",
				"additionalProperties": false
			},
			"createdPIN": {
				"description": "A PIN generated for a homeowner, checked for uniqueness against the database. Defaults to 8 character length and\nall numbers + lowercase letters as the character set.",
				"properties": {
					"pin": {
						"type": "string"
					}
				},
				"required": [
					"pin"
				],
				"type": "object",
				"additionalProperties": false,
				"example": {
					"pin": "abcdefgh"
				}
			},
			"pinRangeErrorType": {
				"description": "Generic range error that may occur when you give a value out of bounds to a pin function",
				"properties": {
					"message": {
						"type": "string"
					}
				},
				"required": [
					"message"
				],
				"type": "object",
				"additionalProperties": false,
				"example": {
					"message": "PIN must be of length 1 or greater"
				}
			},
			"serverErrorType": {
				"description": "Generic unknown server error",
				"properties": {
					"message": {
						"type": "string"
					}
				},
				"required": [
					"message"
				],
				"type": "object",
				"additionalProperties": false,
				"example": {
					"message": "Internal Server Error"
				}
			},
			"PIN": {
				"type": "string",
				"example": "abcdefgh",
				"description": "A PIN generated for a homeowner. Defaults to 8 character length and\nall numbers + lowercase letters as the character set."
			},
			"PINObject": {
				"description": "An object containing an array of unique, generated PINS",
				"properties": {
					"pins": {
						"items": {
							"$ref": "#/components/schemas/PIN"
						},
						"type": "array"
					}
				},
				"required": [
					"pins"
				],
				"type": "object",
				"additionalProperties": false,
				"example": {
					"pins": [
						"abcdefgh",
						"12345678"
					]
				}
			},
			"ActivePin": {
				"properties": {
					"livePinId": {
						"type": "string"
					},
					"pin": {
						"type": "string",
						"nullable": true
					},
					"pid": {
						"type": "number",
						"format": "double"
					},
					"parcelStatus": {
						"type": "string",
						"enum": [
							"A",
							"I"
						]
					},
					"titleNumber": {
						"type": "string"
					},
					"landTitleDistrict": {
						"type": "string"
					},
					"titleStatus": {
						"type": "string",
						"enum": [
							"R",
							"C"
						]
					},
					"fromTitleNumber": {
						"type": "string",
						"nullable": true
					},
					"fromLandTitleDistrict": {
						"type": "string",
						"nullable": true
					},
					"givenName": {
						"type": "string",
						"nullable": true
					},
					"lastName_1": {
						"type": "string",
						"nullable": true
					},
					"lastName_2": {
						"type": "string",
						"nullable": true
					},
					"incorporationNumber": {
						"type": "string",
						"nullable": true
					},
					"addressLine_1": {
						"type": "string"
					},
					"addressLine_2": {
						"type": "string",
						"nullable": true
					},
					"city": {
						"type": "string"
					},
					"province": {
						"type": "string",
						"nullable": true
					},
					"otherGeographicDivision": {
						"type": "string",
						"nullable": true
					},
					"country": {
						"type": "string"
					},
					"postalCode": {
						"type": "string",
						"nullable": true
					},
					"createdAt": {
						"type": "string",
						"format": "date-time"
					},
					"updatedAt": {
						"type": "string",
						"format": "date-time",
						"nullable": true
					}
				},
				"required": [
					"livePinId",
					"pin",
					"pid",
					"parcelStatus",
					"titleNumber",
					"landTitleDistrict",
					"titleStatus",
					"fromTitleNumber",
					"fromLandTitleDistrict",
					"givenName",
					"lastName_1",
					"lastName_2",
					"incorporationNumber",
					"addressLine_1",
					"addressLine_2",
					"city",
					"province",
					"otherGeographicDivision",
					"country",
					"postalCode",
					"createdAt",
					"updatedAt"
				],
				"type": "object",
				"additionalProperties": false
			},
			"EntityNotFoundErrorType": {
				"description": "Error that occurs when an entity cannot be found in the database meeting your search criteria",
				"properties": {
					"message": {
						"type": "string"
					}
				},
				"required": [
					"message"
				],
				"type": "object",
				"additionalProperties": false,
				"example": {
					"message": "Could not find any entity of type \"ActivePin\" matching: {\n\"where\": {\n\"livePinId\": \"e9bee7c0-de39-47b3-9457-34d32cf6feb4\"\n}\n}"
				}
			},
			"GenericTypeORMErrorType": {
				"description": "A generic error given by TypeORM. Often related to invalid syntax for input parameters",
				"properties": {
					"message": {
						"type": "string"
					}
				},
				"required": [
					"message"
				],
				"type": "object",
				"additionalProperties": false,
				"example": {
					"message": "driverError: error: invalid input syntax for type uuid: \"abcd\""
				}
			},
			"requiredFieldErrorType": {
				"description": "A error that can occur when you don't give a required input parameter in the body of a request",
				"properties": {
					"message": {
						"type": "string"
					}
				},
				"required": [
					"message"
				],
				"type": "object",
				"additionalProperties": false,
				"example": {
					"message": "Must provide an expiration name when expiring a PIN"
				}
			},
			"expirationReason": {
				"description": "The reason for expiring a PIN.\n- OptOut = 'OP'\n- CallCenterPinReset = 'CC'\n- OnlineReset = 'OR'\n- ChangeOfOwnership = 'CO'",
				"enum": [
					"OP",
					"CC",
					"OR",
					"CO"
				],
				"type": "string"
			},
			"expireRequestBody": {
				"description": "The request body for a pin expiration request.\nNote that expiredByName and username are only required for reasons other\nthan \"CO\" (change of ownership).",
				"properties": {
					"livePinId": {
						"type": "string"
					},
					"expirationReason": {
						"$ref": "#/components/schemas/expirationReason"
					},
					"expiredByName": {
						"type": "string"
					},
					"expiredByUsername": {
						"type": "string"
					}
				},
				"required": [
					"livePinId",
					"expirationReason"
				],
				"type": "object",
				"additionalProperties": false,
				"example": {
					"livePinId": "ca609097-7b4f-49a7-b2e9-efb78afb3ae6",
					"expirationReason": "OP",
					"expiredByName": "John Smith",
					"expiredByUsername": "jsmith"
				}
			},
			"GeocoderAddress": {
				"description": "BC Geocoder address search result, including score, full address and site ID",
				"properties": {
					"score": {
						"type": "number",
						"format": "double"
					},
					"fullAddress": {
						"type": "string"
					},
					"siteID": {
						"type": "string"
					}
				},
				"required": [
					"score",
					"fullAddress",
					"siteID"
				],
				"type": "object",
				"additionalProperties": false,
				"example": {
					"score": 100,
					"fullAddress": "123 Example Street, City, BC",
					"siteID": "dc1111ba-1f11-111-1eda-111ca1f111c1"
				}
			},
			"getAddressResults": {
				"description": "An object containing an array of the BC Geocoder address search results.",
				"properties": {
					"results": {
						"items": {
							"$ref": "#/components/schemas/GeocoderAddress"
						},
						"type": "array"
					}
				},
				"required": [
					"results"
				],
				"type": "object",
				"additionalProperties": false,
				"example": {
					"results": [
						{
							"score": 100,
							"fullAddress": "123 Example Street, City, BC",
							"siteID": "dc1111ba-1f11-111-1eda-111ca1f111c1"
						}
					]
				}
			},
			"searchRangeErrorType": {
				"description": "Generic range error that may occur when you give a value out of bounds to a search function",
				"properties": {
					"message": {
						"type": "string"
					}
				},
				"required": [
					"message"
				],
				"type": "object",
				"additionalProperties": false,
				"example": {
					"message": "Search string must be of length 3 or greater"
				}
			},
			"geocoderReferenceErrorType": {
				"description": "Reference error that may occur when you have not defined the API environment variables for the geocoder functions",
				"properties": {
					"message": {
						"type": "string"
					}
				},
				"required": [
					"message"
				],
				"type": "object",
				"additionalProperties": false,
				"example": {
					"message": "Geocoder API base URL or 'addresses' endpoint URL is undefined."
				}
			}
		},
		"securitySchemes": {}
	},
	"info": {
		"title": "bc-emli-pin-mgmt-be",
		"version": "1.0.0",
		"description": "BC Virtual Home Energy Rating PIN Management System Backend",
		"license": {
			"name": "Apache-2.0"
		},
		"contact": {
			"name": "Government of British Columbia"
		}
	},
	"openapi": "3.0.0",
	"paths": {
		"/helloworld": {
			"get": {
				"operationId": "GetMessage",
				"responses": {
					"200": {
						"description": "Ok",
						"content": {
							"application/json": {
								"schema": {
									"$ref": "#/components/schemas/HelloWorldResponse"
								}
							}
						}
					}
				},
				"security": [],
				"parameters": []
			}
		},
		"/pins/create": {
			"get": {
				"operationId": "GetPin",
				"responses": {
					"200": {
						"description": "An object containing the unique PIN",
						"content": {
							"application/json": {
								"schema": {
									"$ref": "#/components/schemas/createdPIN"
								}
							}
						}
					},
					"422": {
						"description": "",
						"content": {
							"application/json": {
								"schema": {
									"$ref": "#/components/schemas/pinRangeErrorType"
								}
							}
						}
					},
					"500": {
						"description": "",
						"content": {
							"application/json": {
								"schema": {
									"$ref": "#/components/schemas/serverErrorType"
								}
							}
						}
					}
				},
				"description": "Used to create a single, unique PIN, checking against the DB to do so.\nExpected error codes and messages:\n- `422`\n-- `PIN must be of length 1 or greater`\n-- `Too many PIN creation attempts: consider expanding your pin length or character set to allow more unique PINs.`\n- `500`\n -- `Internal Server Error`",
				"security": [],
				"parameters": [
					{
						"description": "The length of each PIN. Defaults to 8 characters.",
						"in": "query",
						"name": "pinLength",
						"required": false,
						"schema": {
							"format": "double",
							"type": "number"
						}
					},
					{
						"description": "A string (not regex) of the characters to be used to\ngenerate the pin. Default is A-Z excluding O, and 1-9",
						"in": "query",
						"name": "allowedChars",
						"required": false,
						"schema": {
							"type": "string"
						}
					}
				]
			}
		},
		"/pins/initial-create": {
			"get": {
				"operationId": "GetInitialPins",
				"responses": {
					"200": {
						"description": "An object containing an array of the created, unique PINs",
						"content": {
							"application/json": {
								"schema": {
									"$ref": "#/components/schemas/PINObject"
								}
							}
						}
					},
					"422": {
						"description": "",
						"content": {
							"application/json": {
								"schema": {
									"$ref": "#/components/schemas/pinRangeErrorType"
								}
							}
						}
					},
					"500": {
						"description": "",
						"content": {
							"application/json": {
								"schema": {
									"$ref": "#/components/schemas/serverErrorType"
								}
							}
						}
					}
				},
				"description": "Used for the initial creation of PINs, when none exist in the database yet.\nExpected error codes and messages:\n- `422`\n\t-- `PIN must be of length 1 or greater`\n\t-- `Quantity of PINs requested too high: guaranteed repeats for the given pin length and character set.`\n\t-- `The number of PINS created must be greater than 0.`\n- `500`\n\t-- `Internal Server Error`",
				"security": [],
				"parameters": [
					{
						"description": "The quantity of PINs you wish to create.",
						"in": "query",
						"name": "quantity",
						"required": true,
						"schema": {
							"format": "double",
							"type": "number"
						}
					},
					{
						"description": "The length of each PIN. Defaults to 8 characters.",
						"in": "query",
						"name": "pinLength",
						"required": false,
						"schema": {
							"format": "double",
							"type": "number"
						}
					},
					{
						"description": "A string (not regex) of the characters to be used to\ngenerate the pin. Default is A-Z excluding O, and 1-9",
						"in": "query",
						"name": "allowedChars",
						"required": false,
						"schema": {
							"type": "string"
						}
					}
				]
			}
		},
		"/pins/expire": {
			"post": {
				"operationId": "ExpirePin",
				"responses": {
					"200": {
						"description": "The deleted pin",
						"content": {
							"application/json": {
								"schema": {
									"$ref": "#/components/schemas/ActivePin"
								}
							}
						}
					},
					"422": {
						"description": "",
						"content": {
							"application/json": {
								"schema": {
									"$ref": "#/components/schemas/requiredFieldErrorType"
								}
							}
						}
					},
					"500": {
						"description": "",
						"content": {
							"application/json": {
								"schema": {
									"$ref": "#/components/schemas/serverErrorType"
								}
							}
						}
					}
				},
				"description": "Used for expiring pins by their id (livePinId). Requires a reason for expiration, and if not a change of ownership, the name and username of who is expiring the pin.\nExpected error codes and messages:\n  - `422`\n  \t-- `Could not find any entity of type \"ActivePin\" matching: {\\n    \"livePinId\": \"id here\"\\n}`\n  \t-- `Must provide an expiration name when expiring a PIN`\n  \t-- `Must provide an expiration username when expiring a PIN`\n  - `500`\n  \t-- `Internal Server Error`",
				"security": [],
				"parameters": [],
				"requestBody": {
					"description": "The body of the request. Note that expiredByName and username are only required for reasons other than \"CO\" (change of ownership).",
					"required": true,
					"content": {
						"application/json": {
							"schema": {
								"$ref": "#/components/schemas/expireRequestBody",
								"description": "The body of the request. Note that expiredByName and username are only required for reasons other than \"CO\" (change of ownership)."
							}
						}
					}
				}
			}
		},
		"/properties/address/{address}": {
			"get": {
				"operationId": "GetSiteID",
				"responses": {
					"200": {
						"description": "An object with an array of search results.\nEach result contains the match score (from 50-100, 100 being a perfect match) of the result,\nthe full address of the property, and the siteID",
						"content": {
							"application/json": {
								"schema": {
									"$ref": "#/components/schemas/getAddressResults"
								}
							}
						}
					},
					"422": {
						"description": "",
						"content": {
							"application/json": {
								"schema": {
									"$ref": "#/components/schemas/geocoderReferenceErrorType"
								}
							}
						}
					},
					"500": {
						"description": "",
						"content": {
							"application/json": {
								"schema": {
									"$ref": "#/components/schemas/serverErrorType"
								}
							}
						}
					}
				},
				"description": "Used to search for a siteID for a property, giving potentially multiple results.\nExpected error codes and messages:\n- `404`\n-- `Not Found` (when not passing in a path parameter as required)\n- `422`\n-- `Geocoder API base URL or 'addresses' endpoint URL is undefined.`\n-- `Search string must be of length 3 or greater`\n- `500`\n -- `Internal Server Error`",
				"security": [],
				"parameters": [
					{
						"description": "The address you wish to find the siteID for",
						"in": "path",
						"name": "address",
						"required": true,
						"schema": {
							"type": "string"
						}
					}
				]
			}
		}
	},
	"servers": [
		{
			"url": "/"
		}
	]
}